<div
  class="mt-3 border-2 border-blue-600 mb-2 bg-gray-100 ml-1 rounded-xl flex flex-col "
>
  <div class="flex py-2 w-full justify-between">
    <div>
      <img
        [src]="
          businesses[recommendedJob.postedById].profileImageBase64 ||
          '../../../../../assets/bake.png'
        "
        class="w-20 h-20 ml-2 rounded-full"
      />
    </div>
    <div class="py-1 -ml-6">
      <h2 class="text-xl">{{ recommendedJob.title }}</h2>
      <h6 class="text-sm">
        {{ businesses[recommendedJob.postedById].businessName }}
      </h6>
    </div>

    <div class="flex mr-3 mt-2 justify-center">
      <span
        class="pi pi-map-marker"
        style="font-size: 1rem; color: #1d4ed8"
      ></span>
      <h6 class="text-xs ml-1">
        {{ recommendedJob.districtName }}
      </h6>
    </div>
  </div>
  <div class="border-t border-blue-700 my-1 mx-1"></div>

  <div class="flex flex-nowrap gap-4 mt-1 mb-2 ml-3 ">
    <div class="bg-white rounded-xl px-4 py-2 shadow-sm">
      <h3 class="text-sm whitespace-nowrap">&#8377; {{ recommendedJob.salary }}</h3>
    </div>
    <div class="bg-white rounded-xl px-3 py-2 shadow-sm ">
      <h3 class="text-sm whitespace-nowrap">{{ recommendedJob.experienceType }}</h3>
    </div>
    <div class="bg-white rounded-xl px-4 py-2 shadow-sm ">
      <h3 class="text-sm whitespace-nowrap">{{ recommendedJob.jobType }}</h3>
    </div>
  </div>
  <div
    (click)="viewJob()"
    class="bg-blue-600 flex gap-4 my-2 mx-3 p-2 rounded-xl justify-center items-center"
  >
    <span
      class="pi pi-briefcase"
      style="font-size: 1.5rem; color: #d1d9e0"
    ></span>
    <p
      *ngIf="recommendedJob.appliedStatus != 1"
      class="text-sm text-primary-white"
    >
      View Job
    </p>
    <p
      *ngIf="recommendedJob.appliedStatus == 1"
      class="text-sm text-primary-white"
    >
      Applied
    </p>
  </div>
</div>

<p-dialog
  header="Job Details"
  [(visible)]="displayDialog"
  [modal]="true"
  [style]="{ width: '85%', height: '100%' }"
  [maximizable]="true"
  #dialog
  (onShow)="dialog.maximize()"
>
  <ng-template pTemplate="content">
    <div class="flex flex-col gap-3">
      <div>
        <p class="font-bold text-xl text-teal-700 mt-2">
          {{ businesses[recommendedJob.postedById].businessName }}
        </p>
        <p class="text-xs mt-2">Date : {{ recommendedJob.createdDate }}</p>
      </div>

      <hr class="w-full" />
      <div class="flex flex-col">
        <h3 class="text-sm font-medium text-slate-950">Job Description :</h3>
        <p class="text-xs mt-2">{{ recommendedJob.jobDescription }}</p>
      </div>
      <hr />
      <p class="text-sm">
        <span class="text-slate-900 font-medium">Job Role :</span>
        {{ recommendedJob.title }}
      </p>
      <hr />
      <div>
        <h3 class="text-sm font-medium text-slate-950">Address</h3>
        <p class="text-xs mt-2">
          {{ businesses[recommendedJob.postedById].businessAddress }}
        </p>
      </div>
      <hr />

      <h3 class="text-sm font-medium text-slate-950">Other Details</h3>
      <div class="flex gap-3 flex-wrap">
        <div>
          <p class="p-3 border rounded-2xl shadow-lg text-xs">
            <span class="text-xs font-medium text-slate-950">Job Type :</span>
            {{ recommendedJob.jobType }}
          </p>
        </div>
        <div>
          <p class="p-3 border rounded-2xl shadow-lg text-xs">
            <span class="text-xs font-medium text-slate-950">District :</span>
            {{ businesses[recommendedJob.postedById].districtName }}
          </p>
        </div>
        <div>
          <p class="p-3 border rounded-2xl shadow-lg text-xs">
            <span class="text-xs font-medium text-slate-950">Experience :</span>
            {{ recommendedJob.experienceType }}
          </p>
        </div>
      </div>
    </div>
  </ng-template>
  <ng-template pTemplate="footer">
    <button
      (click)="recommendedJob.appliedStatus === 0 ? applyJob() : null"
      type="button"
      [disabled]="recommendedJob.appliedStatus === 1"
      class="py-2.5 px-5 mt-2 me-2 mb-2 text-sm font-medium text-white shadow-lg focus:outline-none bg-blue-500 rounded-lg border border-gray-200"
      [ngClass]="{
        'disabled:opacity-40': recommendedJob.appliedStatus === 1,
        'hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100':
          recommendedJob.appliedStatus !== 1
      }"
    >
      {{ recommendedJob.appliedStatus === 1 ? "Already Applied" : "Apply Now" }}
    </button>
  </ng-template>
</p-dialog>
